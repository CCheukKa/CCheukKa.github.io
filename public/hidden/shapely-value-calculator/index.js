(()=>{function $parcel$export(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var $parcel$global=globalThis,$parcel$modules={},$parcel$inits={},parcelRequire=$parcel$global.parcelRequire38c6;null==parcelRequire&&((parcelRequire=function(e){if(e in $parcel$modules)return $parcel$modules[e].exports;if(e in $parcel$inits){var t=$parcel$inits[e];delete $parcel$inits[e];var r={id:e,exports:{}};return $parcel$modules[e]=r,t.call(r.exports,r,r.exports),r.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){$parcel$inits[e]=t},$parcel$global.parcelRequire38c6=parcelRequire);var parcelRegister=parcelRequire.register;parcelRegister("z89Iw",function(module,exports){var $5SBNj=parcelRequire("5SBNj");let calculateShapely=costs=>{let costFunction=useCustomCostFunctionButton.checked?(coalition,costs)=>{let returnValue;if(eval(customCostFunction.value),"number"!=typeof returnValue)throw window.alert("Cost function must return a number"),Error("Cost function must return a number");return returnValue}:(e,t)=>{let r=e.map(e=>t[e]).sort((e,t)=>e-t);return r.slice(-4).reduce((e,t)=>e+t/2,0)+r.slice(0,-4).reduce((e,t)=>e+t,0)},shapleyValues=(0,$5SBNj.default)(costs,costFunction),valueDifferences=Object.fromEntries(Object.entries(shapleyValues).map(([e,t])=>[e,t-costs[e]])),valuePercents=Object.fromEntries(Object.entries(shapleyValues).map(([e,t])=>[e,t/costs[e]*100])),playerData=Object.entries(costs).map(([e,t])=>({player:e,cost:t,shapley:shapleyValues[e],difference:valueDifferences[e],percent:valuePercents[e]}));return console.table(playerData),playerData},shapelyTable=document.getElementById("shapely-table"),rowTemplate=document.getElementById("row-template"),addRowButton=document.getElementById("add-row-button"),calculateButton=document.getElementById("calculate-button"),customCostFunction=document.getElementById("cost-function"),useCustomCostFunctionButton=document.getElementById("use-custom-cost-function");addRowButton.addEventListener("click",()=>{let e=rowTemplate.content.cloneNode(!0);shapelyTable.querySelector("tbody").appendChild(e);let t=shapelyTable.querySelectorAll("tbody>tr").length;shapelyTable.querySelector("tbody>tr:last-child #player").value=`P${t}`,shapelyTable.querySelector("tbody>tr:last-child #cost").value="0"});for(let i=0;i<4;i++)addRowButton.click();shapelyTable.addEventListener("click",e=>{e.target.matches("button.delete-row-button")&&e.target.closest("tr").remove()}),calculateButton.addEventListener("click",()=>{let e=calculateShapely(Object.fromEntries(Array.from(shapelyTable.querySelectorAll("tbody>tr")).map(e=>({player:e.querySelector("#player").value,cost:Number(e.querySelector("#cost").value)})).map(({player:e,cost:t})=>[e,t]))),t=shapelyTable.querySelector("tbody");e.forEach((e,r)=>{t.children[r+1].querySelector(".shapely").innerHTML=e.shapley.toFixed(2),t.children[r+1].querySelector(".difference").innerHTML=e.difference.toFixed(2),t.children[r+1].querySelector(".percent").innerHTML=e.percent.toFixed(2)})})}),parcelRegister("5SBNj",function(e,t){$parcel$export(e.exports,"default",()=>r);function r(e,t){function r(e){return e<=1?1:e*r(e-1)}return function(e,t){let n=Object.keys(e),l=n.length,o={};for(let e of n)o[e]=0;for(let c=0;c<1<<l;c++){let u=[];for(let e=0;e<l;e++)c&1<<e&&u.push(n[e]);for(let n of u){let c=u.filter(e=>e!==n),i=t(u,e)-t(c,e),a=u.length,d=r(c.length)*r(l-a)/r(l);o[n]+=i*d}}return o}(e,t)}}),parcelRequire("z89Iw")})();
//# sourceMappingURL=index.js.map
